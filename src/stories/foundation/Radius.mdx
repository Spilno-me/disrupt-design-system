{/* @jsxRuntime automatic */}
{/* @jsxImportSource react */}
import { Meta } from '@storybook/addon-docs/blocks';
import { Circle } from 'lucide-react';
import {
  SectionHeader,
  InfoBox,
  RadiusShowcase,
  TokenTable,
  CodeBlock,
  TOKENS,
} from './DocComponents';
import {
  ABYSS,
  DEEP_CURRENT,
  DUSK_REEF,
  PRIMITIVES,
  SHADOWS,
  RADIUS,
  SLATE,
  SPACING,
} from '../../constants/designTokens';

<Meta title="Foundation/Design Tokens/Radius" />

{/* Page Header */}
<div style={{
  background: `linear-gradient(135deg, ${DEEP_CURRENT[600]} 0%, ${DEEP_CURRENT[800]} 100%)`,
  borderRadius: RADIUS.xl,
  padding: SPACING.px.section,
  marginBottom: SPACING.px.section,
  position: 'relative',
  overflow: 'hidden',
}}>
  {/* Decorative background icon */}
  <div style={{
    position: 'absolute',
    right: '40px',
    top: '50%',
    transform: 'translateY(-50%)',
    opacity: 0.1,
    pointerEvents: 'none',
  }}>
    <Circle size={180} color={PRIMITIVES.white} strokeWidth={1} />
  </div>

  <div style={{ position: 'relative', zIndex: 1 }}>
    <div style={{
      display: 'inline-flex',
      alignItems: 'center',
      gap: SPACING.px.tight,
      marginBottom: SPACING.px.base,
    }}>
      <Circle size={28} color={PRIMITIVES.white} />
    </div>

    <h1 style={{
      margin: `0 0 ${SPACING.px.base} 0`,
      fontSize: '36px',
      fontWeight: 700,
      fontFamily: '"Pilat Extended", sans-serif',
      color: PRIMITIVES.white,
    }}>
      <span>Border Radius</span>
    </h1>

    <p style={{
      margin: 0,
      fontSize: '16px',
      fontFamily: '"Fixel", sans-serif',
      color: SLATE[300],
      lineHeight: 1.6,
      maxWidth: '500px',
    }}>
      <span>Consistent corner rounding creates visual harmony and signals interactivity.
      Larger radius = more prominent or interactive.</span>
    </p>
  </div>
</div>

<InfoBox variant="tip">
  <strong>Rule:</strong> Larger radius indicates more prominence or interactivity.
  Use consistent radius within component groups.
</InfoBox>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Radius Scale</h2>

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',
  gap: '16px',
  marginBottom: '48px',
}}>
  <RadiusShowcase name="xs" value={RADIUS.xs} usage="Badges, tags, small buttons" />
  <RadiusShowcase name="sm" value={RADIUS.sm} usage="Input fields, cards (DEFAULT)" />
  <RadiusShowcase name="md" value={RADIUS.md} usage="Buttons, dialogs, prominent cards" />
  <RadiusShowcase name="lg" value={RADIUS.lg} usage="Large cards, feature sections" />
  <RadiusShowcase name="xl" value={RADIUS.xl} usage="Hero elements, featured content" />
  <RadiusShowcase name="2xl" value={RADIUS['2xl']} usage="Large containers" />
  <RadiusShowcase name="full" value={RADIUS.full} usage="Pills, avatars, circular elements" />
</div>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Visual Comparison</h2>

<div style={{
  background: PRIMITIVES.white,
  borderRadius: RADIUS.lg,
  padding: '32px',
  border: `1px solid ${SLATE[200]}`,
  marginBottom: '48px',
}}>
  <div style={{
    display: 'flex',
    gap: '24px',
    alignItems: 'flex-end',
    justifyContent: 'center',
    flexWrap: 'wrap',
  }}>
    {Object.entries(RADIUS).map(([name, value]) => (
      <div key={name} style={{ textAlign: 'center' }}>
        <div
          style={{
            width: name === 'full' ? '64px' : '80px',
            height: '80px',
            background: DEEP_CURRENT[500],
            borderRadius: value,
            marginBottom: '12px',
          }}
        />
        <div style={{
          fontSize: '13px',
          fontWeight: 600,
          fontFamily: '"Fixel", sans-serif',
          color: ABYSS[500],
        }}>
          <span>{name}</span>
        </div>
        <div style={{
          fontSize: '11px',
          fontFamily: 'ui-monospace, monospace',
          color: SLATE[500],
        }}>
          <span>{value}</span>
        </div>
      </div>
    ))}
  </div>
</div>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Token Reference</h2>

<TokenTable
  tokens={[
    { name: 'RADIUS.xs', value: '4px', tailwind: 'rounded-xs', usage: 'Badges, tags, small buttons' },
    { name: 'RADIUS.sm', value: '8px', tailwind: 'rounded-sm', usage: 'Input fields, cards (default)' },
    { name: 'RADIUS.md', value: '12px', tailwind: 'rounded-md', usage: 'Buttons, dialogs, prominent cards' },
    { name: 'RADIUS.lg', value: '16px', tailwind: 'rounded-lg', usage: 'Large cards, feature sections' },
    { name: 'RADIUS.xl', value: '20px', tailwind: 'rounded-xl', usage: 'Hero elements, featured content' },
    { name: 'RADIUS.2xl', value: '24px', tailwind: 'rounded-2xl', usage: 'Large containers' },
    { name: 'RADIUS.full', value: '9999px', tailwind: 'rounded-full', usage: 'Pills, avatars, circular' },
  ]}
/>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Common Patterns</h2>

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(3, 1fr)',
  gap: '24px',
  marginBottom: '48px',
}}>
  {/* Card */}
  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.sm,
    padding: '20px',
    boxShadow: SHADOWS.md,
    border: `1px solid ${SLATE[200]}`,
  }}>
    <div style={{
      fontSize: '14px',
      fontWeight: 600,
      fontFamily: '"Fixel", sans-serif',
      color: ABYSS[500],
      marginBottom: '8px',
    }}>
      <span>Card</span>
    </div>
    <div style={{
      fontSize: '12px',
      fontFamily: 'ui-monospace, monospace',
      color: SLATE[500],
    }}>
      <span>rounded-sm (8px)</span>
    </div>
  </div>

  {/* Button */}
  <div style={{
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'center',
    background: SLATE[50],
    borderRadius: RADIUS.sm,
    padding: '20px',
  }}>
    <button style={{
      background: DEEP_CURRENT[600],  // [600] for 4.89:1 contrast (AA compliant)
      color: PRIMITIVES.white,
      border: 'none',
      borderRadius: RADIUS.md,
      padding: '10px 20px',
      fontSize: '14px',
      fontWeight: 500,
      fontFamily: '"Fixel", sans-serif',
      cursor: 'pointer',
      marginBottom: '12px',
    }}>
      Button
    </button>
    <div style={{
      fontSize: '12px',
      fontFamily: 'ui-monospace, monospace',
      color: SLATE[500],
    }}>
      <span>rounded-md (12px)</span>
    </div>
  </div>

  {/* Badge */}
  <div style={{
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'center',
    background: SLATE[50],
    borderRadius: RADIUS.sm,
    padding: '20px',
  }}>
    <span style={{
      background: DEEP_CURRENT[50],
      color: DEEP_CURRENT[700],
      borderRadius: RADIUS.xs,
      padding: '4px 12px',
      fontSize: '12px',
      fontWeight: 500,
      fontFamily: '"Fixel", sans-serif',
      marginBottom: '12px',
    }}>
      Badge
    </span>
    <div style={{
      fontSize: '12px',
      fontFamily: 'ui-monospace, monospace',
      color: SLATE[500],
    }}>
      <span>rounded-xs (4px)</span>
    </div>
  </div>
</div>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Nested Corners Formula</h2>

<InfoBox variant="warning">
  <strong>Critical Rule:</strong> When nesting rounded elements, the outer radius must equal the inner radius plus the padding between them.
</InfoBox>

<div style={{
  background: SLATE[50],
  borderRadius: RADIUS.lg,
  padding: SPACING.px.cardPadding,
  marginBottom: SPACING.px.section,
}}>
  <div style={{
    fontSize: '18px',
    fontWeight: 600,
    fontFamily: '"Fixel", sans-serif',
    color: ABYSS[500],
    marginBottom: SPACING.px.base,
    textAlign: 'center',
  }}>
    <span>Inner + Padding = Outer</span>
  </div>

  {/* Visual diagram */}
  <div style={{
    display: 'flex',
    justifyContent: 'center',
    marginBottom: SPACING.px.comfortable,
  }}>
    <div style={{
      position: 'relative',
      background: DEEP_CURRENT[100],
      borderRadius: RADIUS.xl,
      padding: SPACING.px.tight,
      border: `3px solid ${DEEP_CURRENT[400]}`,
    }}>
      {/* Outer label */}
      <div style={{
        position: 'absolute',
        top: '-28px',
        left: '50%',
        transform: 'translateX(-50%)',
        background: DEEP_CURRENT[600],  // [600] for 4.89:1 contrast (AA compliant)
        color: PRIMITIVES.white,
        padding: '4px 12px',
        borderRadius: RADIUS.xs,
        fontSize: '12px',
        fontWeight: 600,
        fontFamily: '"Fixel", sans-serif',
        whiteSpace: 'nowrap',
      }}>
        <span>Outer: xl (20px)</span>
      </div>

      <div style={{
        background: PRIMITIVES.white,
        borderRadius: RADIUS.md,
        padding: '40px 80px',
        border: `3px solid ${DUSK_REEF[400]}`,
        position: 'relative',
      }}>
        {/* Inner label */}
        <div style={{
          position: 'absolute',
          bottom: '-28px',
          left: '50%',
          transform: 'translateX(-50%)',
          background: DUSK_REEF[500],
          color: PRIMITIVES.white,
          padding: '4px 12px',
          borderRadius: RADIUS.xs,
          fontSize: '12px',
          fontWeight: 600,
          fontFamily: '"Fixel", sans-serif',
          whiteSpace: 'nowrap',
        }}>
          <span>Inner: md (12px)</span>
        </div>

        <span style={{
          fontSize: '14px',
          fontFamily: '"Fixel", sans-serif',
          color: ABYSS[500],
        }}>Content</span>
      </div>

      {/* Padding label */}
      <div style={{
        position: 'absolute',
        right: '-70px',
        top: '50%',
        transform: 'translateY(-50%)',
        background: SLATE[600],  // [600] for 6.14:1 contrast (AA compliant)
        color: PRIMITIVES.white,
        padding: '4px 12px',
        borderRadius: RADIUS.xs,
        fontSize: '12px',
        fontWeight: 600,
        fontFamily: '"Fixel", sans-serif',
        whiteSpace: 'nowrap',
      }}>
        <span>Padding: 8px</span>
      </div>
    </div>
  </div>

  <div style={{
    textAlign: 'center',
    fontSize: '14px',
    fontFamily: 'ui-monospace, monospace',
    color: ABYSS[500],
  }}>
    <span>12px (md) + 8px (padding) = 20px (xl)</span>
  </div>
</div>

{/* Common pairings table */}
<div style={{
  background: PRIMITIVES.white,
  borderRadius: RADIUS.lg,
  padding: SPACING.px.cardPadding,
  border: `1px solid ${SLATE[200]}`,
  marginBottom: SPACING.px.section,
}}>
  <div style={{
    fontSize: '16px',
    fontWeight: 600,
    fontFamily: '"Fixel", sans-serif',
    color: ABYSS[500],
    marginBottom: SPACING.px.base,
  }}>
    <span>Common Nested Pairings</span>
  </div>

  <table style={{
    width: '100%',
    borderCollapse: 'collapse',
    fontSize: '13px',
    fontFamily: '"Fixel", sans-serif',
  }}>
    <thead>
      <tr style={{ borderBottom: `2px solid ${SLATE[200]}` }}>
        <th style={{ textAlign: 'left', padding: '12px 8px', color: ABYSS[500], fontWeight: 600 }}>Inner</th>
        <th style={{ textAlign: 'left', padding: '12px 8px', color: ABYSS[500], fontWeight: 600 }}>Padding</th>
        <th style={{ textAlign: 'left', padding: '12px 8px', color: ABYSS[500], fontWeight: 600 }}>Outer</th>
        <th style={{ textAlign: 'left', padding: '12px 8px', color: ABYSS[500], fontWeight: 600 }}>Example Use</th>
      </tr>
    </thead>
    <tbody>
      {[
        { inner: 'xs (4px)', padding: 'xs (4px)', outer: 'sm (8px)', example: 'Badge in chip' },
        { inner: 'xs (4px)', padding: 'sm (8px)', outer: 'md (12px)', example: 'Chip in card' },
        { inner: 'sm (8px)', padding: 'xs (4px)', outer: 'md (12px)', example: 'Button in container' },
        { inner: 'sm (8px)', padding: 'sm (8px)', outer: 'lg (16px)', example: 'Input in form card' },
        { inner: 'md (12px)', padding: 'sm (8px)', outer: 'xl (20px)', example: 'Card in section' },
        { inner: 'md (12px)', padding: 'md (12px)', outer: '2xl (24px)', example: 'Dialog in overlay' },
        { inner: 'lg (16px)', padding: 'sm (8px)', outer: '2xl (24px)', example: 'Large card in container' },
      ].map((row, i) => (
        <tr key={i} style={{ borderBottom: `1px solid ${SLATE[100]}` }}>
          <td style={{ padding: '12px 8px', fontFamily: 'ui-monospace, monospace', color: DUSK_REEF[600] }}>{row.inner}</td>
          <td style={{ padding: '12px 8px', fontFamily: 'ui-monospace, monospace', color: SLATE[500] }}>{row.padding}</td>
          <td style={{ padding: '12px 8px', fontFamily: 'ui-monospace, monospace', color: DEEP_CURRENT[600] }}>{row.outer}</td>
          <td style={{ padding: '12px 8px', color: ABYSS[400] }}>{row.example}</td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

<InfoBox variant="warning">
  <strong>Anti-pattern:</strong> Using the same radius on nested elements makes inner corners look "pinched" and visually inconsistent.
</InfoBox>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Usage Examples</h2>

<CodeBlock
  language="tsx"
  code={`// Card (default)
<div className="bg-surface rounded-sm shadow-md p-6">
  Card content
</div>

// Button
<button className="bg-accent-strong text-inverse rounded-md px-4 py-2">
  Click me
</button>

// Badge
<span className="bg-accent-bg text-accent rounded-xs px-2 py-0.5 text-xs">
  New
</span>

// Avatar (circular)
<img className="rounded-full w-10 h-10" src="/avatar.jpg" alt="User" />

// Dialog
<div className="bg-surface rounded-lg shadow-lg p-8">
  Dialog content
</div>

// ================================
// NESTED CORNERS (Inner + Padding = Outer)
// ================================

// Card in section: md (12px) + sm (8px) = xl (20px)
<div className="rounded-xl p-2 bg-slate-100">    {/* outer: 20px */}
  <div className="rounded-md p-4 bg-white">      {/* inner: 12px */}
    Nested card content
  </div>
</div>

// Button in container: sm (8px) + xs (4px) = md (12px)
<div className="rounded-md p-1 bg-slate-100">    {/* outer: 12px */}
  <button className="rounded-sm px-4 py-2">      {/* inner: 8px */}
    Click me
  </button>
</div>

// Input in form card: sm (8px) + sm (8px) = lg (16px)
<div className="rounded-lg p-2 border">          {/* outer: 16px */}
  <input className="rounded-sm w-full px-3 py-2" /> {/* inner: 8px */}
</div>`}
/>
