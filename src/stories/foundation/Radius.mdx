{/* @jsxRuntime automatic */}
{/* @jsxImportSource react */}
import { Meta } from '@storybook/addon-docs/blocks';
import { Circle, ArrowRight, Plus, Equal, Check } from 'lucide-react';
import {
  BrandHero,
  InfoBox,
  SectionHeader,
  ABYSS,
  DEEP_CURRENT,
  DUSK_REEF,
  PRIMITIVES,
  SHADOWS,
  RADIUS,
  SLATE,
  SPACING,
  TYPOGRAPHY,
} from '../brand/BrandComponents';
import { RadiusShowcase, TokenTable, CodeBlock } from './DocComponents';
import { Button } from '../../components/ui/button';
import { Badge } from '../../components/ui/badge';
import { AppCard, AppCardHeader, AppCardTitle, AppCardDescription, AppCardContent } from '../../components/ui/app-card';

<Meta title="Foundation/Design Tokens/Radius" />

{/* Hero Header */}
<BrandHero
  title="Border Radius"
  description="Consistent corner rounding creates visual harmony and signals interactivity. Larger radius = more prominent or interactive."
  gradient="teal"
  decorativeIcon={<Circle size={180} color={PRIMITIVES.white} strokeWidth={1} />}
/>

<InfoBox variant="tip">
  <strong>Rule:</strong> Larger radius indicates more prominence or interactivity.
  Use consistent radius within component groups.
</InfoBox>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Radius Scale</h2>

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',
  gap: '16px',
  marginBottom: '48px',
}}>
  <RadiusShowcase name="xs" value={RADIUS.xs} usage="Badges, tags, small buttons" />
  <RadiusShowcase name="sm" value={RADIUS.sm} usage="Input fields, cards (DEFAULT)" />
  <RadiusShowcase name="md" value={RADIUS.md} usage="Buttons, dialogs, prominent cards" />
  <RadiusShowcase name="lg" value={RADIUS.lg} usage="Large cards, feature sections" />
  <RadiusShowcase name="xl" value={RADIUS.xl} usage="Hero elements, featured content" />
  <RadiusShowcase name="2xl" value={RADIUS['2xl']} usage="Large containers" />
  <RadiusShowcase name="full" value={RADIUS.full} usage="Pills, avatars, circular elements" />
</div>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Visual Comparison</h2>

<div style={{
  background: PRIMITIVES.softLinen,
  borderRadius: RADIUS.lg,
  padding: '32px',
  border: `1px solid ${SLATE[200]}`,
  marginBottom: '48px',
}}>
  <div style={{
    display: 'flex',
    gap: '24px',
    alignItems: 'flex-end',
    justifyContent: 'center',
    flexWrap: 'wrap',
  }}>
    {Object.entries(RADIUS).map(([name, value]) => (
      <div key={name} style={{ textAlign: 'center' }}>
        <div
          style={{
            width: name === 'full' ? '64px' : '80px',
            height: '80px',
            background: DEEP_CURRENT[500],
            borderRadius: value,
            marginBottom: '12px',
          }}
        />
        <div style={{
          fontSize: '13px',
          fontWeight: 600,
          fontFamily: '"Fixel", sans-serif',
          color: ABYSS[500],
        }}>
          <span>{name}</span>
        </div>
        <div style={{
          fontSize: '11px',
          fontFamily: '"JetBrains Mono", ui-monospace, monospace',
          color: SLATE[500],
        }}>
          <span>{value}</span>
        </div>
      </div>
    ))}
  </div>
</div>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Token Reference</h2>

<TokenTable
  tokens={[
    { name: 'RADIUS.xs', value: '4px', tailwind: 'rounded-xs', usage: 'Badges, tags, small buttons' },
    { name: 'RADIUS.sm', value: '8px', tailwind: 'rounded-sm', usage: 'Input fields, cards (default)' },
    { name: 'RADIUS.md', value: '12px', tailwind: 'rounded-md', usage: 'Buttons, dialogs, prominent cards' },
    { name: 'RADIUS.lg', value: '16px', tailwind: 'rounded-lg', usage: 'Large cards, feature sections' },
    { name: 'RADIUS.xl', value: '20px', tailwind: 'rounded-xl', usage: 'Hero elements, featured content' },
    { name: 'RADIUS.2xl', value: '24px', tailwind: 'rounded-2xl', usage: 'Large containers' },
    { name: 'RADIUS.full', value: '9999px', tailwind: 'rounded-full', usage: 'Pills, avatars, circular' },
  ]}
/>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Common Patterns</h2>

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(3, 1fr)',
  gap: '24px',
  marginBottom: '48px',
}}>
  {/* Card - Real AppCard component */}
  <div style={{
    display: 'flex',
    flexDirection: 'column',
    gap: '12px',
  }}>
    <AppCard shadow="md" className="min-h-[100px]">
      <AppCardHeader>
        <AppCardTitle>Card Title</AppCardTitle>
        <AppCardDescription>Sample content</AppCardDescription>
      </AppCardHeader>
    </AppCard>
    <div style={{
      textAlign: 'center',
      fontSize: '12px',
      fontFamily: '"JetBrains Mono", ui-monospace, monospace',
      color: SLATE[500],
    }}>
      <span>rounded-lg (16px)</span>
    </div>
  </div>

  {/* Button - Real Button component */}
  <div style={{
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'center',
    gap: '12px',
    background: SLATE[50],
    borderRadius: RADIUS.lg,
    padding: '24px',
  }}>
    <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', justifyContent: 'center' }}>
      <Button variant="accent">Primary</Button>
      <Button variant="outline">Outline</Button>
    </div>
    <div style={{
      fontSize: '12px',
      fontFamily: '"JetBrains Mono", ui-monospace, monospace',
      color: SLATE[500],
    }}>
      <span>rounded-md (12px)</span>
    </div>
  </div>

  {/* Badge - Real Badge component */}
  <div style={{
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'center',
    gap: '12px',
    background: SLATE[50],
    borderRadius: RADIUS.lg,
    padding: '24px',
  }}>
    <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', justifyContent: 'center' }}>
      <Badge variant="info">Info</Badge>
      <Badge variant="success">Success</Badge>
      <Badge variant="warning">Warning</Badge>
    </div>
    <div style={{
      fontSize: '12px',
      fontFamily: '"JetBrains Mono", ui-monospace, monospace',
      color: SLATE[500],
    }}>
      <span>rounded-sm (8px)</span>
    </div>
  </div>
</div>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Nested Corners Formula</h2>

<InfoBox variant="warning">
  <strong>Critical Rule:</strong> When nesting rounded elements, the outer radius must equal the inner radius plus the padding between them.
</InfoBox>

{/* Clean Formula Visualization */}
<div style={{
  background: `linear-gradient(135deg, ${DEEP_CURRENT[50]} 0%, ${DUSK_REEF[50]} 100%)`,
  borderRadius: RADIUS.xl,
  padding: '48px 32px',
  marginBottom: '32px',
  border: `1px solid ${SLATE[200]}`,
}}>
  {/* Formula equation */}
  <div style={{
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    gap: '24px',
    marginBottom: '48px',
  }}>
    {/* Inner */}
    <div style={{
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      gap: '8px',
    }}>
      <div style={{
        width: '72px',
        height: '72px',
        background: PRIMITIVES.white,
        borderRadius: RADIUS.md,
        border: `3px solid ${DUSK_REEF[400]}`,
        boxShadow: SHADOWS.sm,
      }} />
      <span style={{ fontSize: '13px', fontWeight: 600, fontFamily: '"Fixel", sans-serif', color: DUSK_REEF[600] }}>Inner</span>
      <span style={{ fontSize: '12px', fontFamily: '"JetBrains Mono", monospace', color: DUSK_REEF[500] }}>12px</span>
    </div>

    <Plus size={24} style={{ color: SLATE[400], marginTop: '-40px' }} />

    {/* Padding - just the number */}
    <div style={{
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      gap: '8px',
    }}>
      <div style={{
        width: '72px',
        height: '72px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      }}>
        <span style={{ fontSize: '32px', fontWeight: 600, fontFamily: '"JetBrains Mono", monospace', color: SLATE[500] }}>8</span>
      </div>
      <span style={{ fontSize: '13px', fontWeight: 600, fontFamily: '"Fixel", sans-serif', color: SLATE[600] }}>Padding</span>
      <span style={{ fontSize: '12px', fontFamily: '"JetBrains Mono", monospace', color: SLATE[500] }}>8px</span>
    </div>

    <Equal size={24} style={{ color: SLATE[400], marginTop: '-40px' }} />

    {/* Outer - dashed border */}
    <div style={{
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      gap: '8px',
    }}>
      <div style={{
        width: '72px',
        height: '72px',
        background: 'transparent',
        borderRadius: RADIUS.xl,
        border: `3px dashed ${DEEP_CURRENT[400]}`,
      }} />
      <span style={{ fontSize: '13px', fontWeight: 600, fontFamily: '"Fixel", sans-serif', color: DEEP_CURRENT[600] }}>Outer</span>
      <span style={{ fontSize: '12px', fontFamily: '"JetBrains Mono", monospace', color: DEEP_CURRENT[500] }}>20px</span>
    </div>
  </div>

  {/* Live demo with real nested elements */}
  <div style={{
    display: 'flex',
    justifyContent: 'center',
    gap: '64px',
    alignItems: 'flex-start',
  }}>
    {/* Correct example */}
    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '12px' }}>
      <div style={{
        background: 'transparent',
        borderRadius: RADIUS.xl,
        padding: '8px',
        border: `3px dashed ${DEEP_CURRENT[400]}`,
      }}>
        <div style={{
          background: PRIMITIVES.white,
          borderRadius: RADIUS.md,
          padding: '20px 40px',
          border: `3px solid ${DUSK_REEF[400]}`,
          boxShadow: SHADOWS.sm,
        }}>
          <span style={{ fontSize: '14px', fontFamily: '"Fixel", sans-serif', color: ABYSS[500] }}>Nested Content</span>
        </div>
      </div>
      <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
        <Check size={16} style={{ color: '#22c55e' }} />
        <span style={{ fontSize: '12px', fontWeight: 500, fontFamily: '"Fixel", sans-serif', color: ABYSS[500] }}>Correct: Harmonious curves</span>
      </div>
      <span style={{ fontSize: '11px', fontFamily: '"JetBrains Mono", monospace', color: SLATE[500] }}>md (12) + 8 = xl (20)</span>
    </div>

    {/* Incorrect example */}
    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '12px' }}>
      <div style={{
        background: 'transparent',
        borderRadius: RADIUS.md,
        padding: '8px',
        border: `3px dashed ${SLATE[300]}`,
      }}>
        <div style={{
          background: PRIMITIVES.white,
          borderRadius: RADIUS.md,
          padding: '20px 40px',
          border: `3px solid ${SLATE[300]}`,
          boxShadow: SHADOWS.sm,
        }}>
          <span style={{ fontSize: '14px', fontFamily: '"Fixel", sans-serif', color: SLATE[400] }}>Nested Content</span>
        </div>
      </div>
      <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
        <span style={{ fontSize: '16px', color: '#ef4444' }}>âœ•</span>
        <span style={{ fontSize: '12px', fontWeight: 500, fontFamily: '"Fixel", sans-serif', color: SLATE[500] }}>Wrong: Pinched corners</span>
      </div>
      <span style={{ fontSize: '11px', fontFamily: '"JetBrains Mono", monospace', color: SLATE[400] }}>Same radius = visual conflict</span>
    </div>
  </div>
</div>

{/* Compact pairings reference */}
<div style={{
  display: 'flex',
  flexWrap: 'wrap',
  gap: '8px',
  marginBottom: SPACING.px.section,
}}>
  {[
    { inner: 'xs', padding: '4', outer: 'sm' },
    { inner: 'sm', padding: '4', outer: 'md' },
    { inner: 'sm', padding: '8', outer: 'lg' },
    { inner: 'md', padding: '8', outer: 'xl' },
    { inner: 'md', padding: '12', outer: '2xl' },
    { inner: 'lg', padding: '8', outer: '2xl' },
  ].map((item, i) => (
    <div key={i} style={{
      background: PRIMITIVES.white,
      borderRadius: RADIUS.xs,
      padding: '6px 12px',
      border: `1px solid ${SLATE[200]}`,
      fontSize: '12px',
      fontFamily: '"JetBrains Mono", monospace',
    }}>
      <span style={{ color: DUSK_REEF[600] }}>{item.inner}</span>
      <span style={{ color: SLATE[400] }}> + </span>
      <span style={{ color: SLATE[500] }}>{item.padding}</span>
      <span style={{ color: SLATE[400] }}> = </span>
      <span style={{ color: DEEP_CURRENT[600] }}>{item.outer}</span>
    </div>
  ))}
</div>

<InfoBox variant="tip">
  <strong>Pro tip:</strong> When in doubt, add 8px to the inner radius to get the outer radius. This creates visually balanced nested corners in most cases.
</InfoBox>

---

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Usage Examples</h2>

<CodeBlock
  language="tsx"
  code={`// Card (default)
<div className="bg-surface rounded-sm shadow-md p-6">
  Card content
</div>

// Button
<button className="bg-accent-strong text-inverse rounded-md px-4 py-2">
  Click me
</button>

// Badge
<span className="bg-accent-bg text-accent rounded-xs px-2 py-0.5 text-xs">
  New
</span>

// Avatar (circular)
<img className="rounded-full w-10 h-10" src="/avatar.jpg" alt="User" />

// Dialog
<div className="bg-surface rounded-lg shadow-lg p-8">
  Dialog content
</div>

// ================================
// NESTED CORNERS (Inner + Padding = Outer)
// ================================

// Card in section: md (12px) + sm (8px) = xl (20px)
<div className="rounded-xl p-2 bg-slate-100">    {/* outer: 20px */}
  <div className="rounded-md p-4 bg-white">      {/* inner: 12px */}
    Nested card content
  </div>
</div>

// Button in container: sm (8px) + xs (4px) = md (12px)
<div className="rounded-md p-1 bg-slate-100">    {/* outer: 12px */}
  <button className="rounded-sm px-4 py-2">      {/* inner: 8px */}
    Click me
  </button>
</div>

// Input in form card: sm (8px) + sm (8px) = lg (16px)
<div className="rounded-lg p-2 border">          {/* outer: 16px */}
  <input className="rounded-sm w-full px-3 py-2" /> {/* inner: 8px */}
</div>`}
/>
