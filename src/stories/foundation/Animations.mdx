{/* @jsxRuntime automatic */}
{/* @jsxImportSource react */}
import { Meta } from '@storybook/addon-docs/blocks';
import { Sparkles, Clock, Loader2, Check, Play } from 'lucide-react';
import {
  BrandHero,
  InfoBox,
  ABYSS,
  DEEP_CURRENT,
  DUSK_REEF,
  PRIMITIVES,
  SHADOWS,
  RADIUS,
  SLATE,
  SPACING,
} from '../brand/BrandComponents';
import { CodeBlock } from './DocComponents';
import { Button } from '../../components/ui/button';
import { Skeleton, SkeletonImage, SkeletonText } from '../../components/ui/Skeleton';
import { ExecutingAnimation } from '../../components/ui/ExecutingAnimation';
import { TRANSITIONS } from '../../constants/designTokens';

<Meta title="Foundation/Design Tokens/Animations" />

{/* Hero Header */}
<BrandHero
  title="Animations & Loading States"
  description="DDS provides a suite of animated components for loading states and micro-interactions. Use these components consistently across your application."
  gradient="purple"
  decorativeIcon={<Sparkles size={180} color={PRIMITIVES.white} strokeWidth={1} />}
/>

<InfoBox variant="tip">
  <strong>Use DDS components:</strong> Always import loading and animation components from the design system.
  Don't create custom loaders or skeleton implementations.
</InfoBox>

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Loading Components</h2>

### ExecutingAnimation (Primary Loader)

The orbital three-dot loader used for primary loading states like form submissions, page loads, and async operations.

<div style={{
  display: 'flex',
  gap: '48px',
  marginBottom: '32px',
  alignItems: 'center',
  flexWrap: 'wrap',
}}>
  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.lg,
    padding: '32px',
    border: `1px solid ${SLATE[200]}`,
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    gap: '16px',
  }}>
    <ExecutingAnimation className="w-24 h-24" variant="light" />
    <span style={{ fontSize: '13px', fontFamily: '"Fixel", sans-serif', color: DUSK_REEF[500] }}>
      <span>Light variant (default)</span>
    </span>
  </div>

  <div style={{
    background: ABYSS[500],
    borderRadius: RADIUS.lg,
    padding: '32px',
    border: `1px solid ${ABYSS[400]}`,
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    gap: '16px',
  }}>
    <ExecutingAnimation className="w-24 h-24" variant="dark" />
    <span style={{ fontSize: '13px', fontFamily: '"Fixel", sans-serif', color: SLATE[300] }}>
      <span>Dark variant</span>
    </span>
  </div>
</div>

<CodeBlock
  language="tsx"
  code={`import { ExecutingAnimation } from '@adrozdenko/design-system'

// Default (light background)
<ExecutingAnimation className="w-24 h-24" />

// Dark background
<ExecutingAnimation className="w-24 h-24" variant="dark" />

// Smaller size for inline loading
<ExecutingAnimation className="w-8 h-8" />`}
/>

### Skeleton Components

Use skeletons to indicate content is loading while maintaining layout structure.

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(3, 1fr)',
  gap: '24px',
  marginBottom: '32px',
}}>
  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.lg,
    padding: '24px',
    border: `1px solid ${SLATE[200]}`,
  }}>
    <div style={{ marginBottom: '12px', fontSize: '13px', fontWeight: 600, fontFamily: '"Fixel", sans-serif', color: ABYSS[500] }}>
      <span>Skeleton (basic)</span>
    </div>
    <Skeleton className="w-full h-10 mb-3" />
    <Skeleton className="w-3/4 h-10" />
  </div>

  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.lg,
    padding: '24px',
    border: `1px solid ${SLATE[200]}`,
  }}>
    <div style={{ marginBottom: '12px', fontSize: '13px', fontWeight: 600, fontFamily: '"Fixel", sans-serif', color: ABYSS[500] }}>
      <span>SkeletonImage</span>
    </div>
    <SkeletonImage aspectRatio="16/9" />
  </div>

  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.lg,
    padding: '24px',
    border: `1px solid ${SLATE[200]}`,
  }}>
    <div style={{ marginBottom: '12px', fontSize: '13px', fontWeight: 600, fontFamily: '"Fixel", sans-serif', color: ABYSS[500] }}>
      <span>SkeletonText</span>
    </div>
    <SkeletonText lines={4} />
  </div>
</div>

<CodeBlock
  language="tsx"
  code={`import { Skeleton, SkeletonImage, SkeletonText } from '@adrozdenko/design-system'

// Basic skeleton
<Skeleton className="w-[200px] h-[20px]" />

// Image placeholder with aspect ratio
<SkeletonImage aspectRatio="16/9" />
<SkeletonImage aspectRatio="square" />
<SkeletonImage aspectRatio="4/3" />

// Text paragraph skeleton
<SkeletonText lines={3} />

// Card skeleton example
<div className="p-4 border rounded-lg">
  <SkeletonImage aspectRatio="16/9" className="mb-4" />
  <Skeleton className="w-3/4 h-6 mb-2" />
  <SkeletonText lines={2} />
</div>`}
/>

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Transition Tokens</h2>

Use these tokens for custom transitions when DDS components don't cover your use case.

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(4, 1fr)',
  gap: '16px',
  marginBottom: '32px',
}}>
  {[
    { name: 'Fast', value: TRANSITIONS.duration.fast, usage: 'Micro-interactions, hover' },
    { name: 'Normal', value: TRANSITIONS.duration.normal, usage: 'Standard transitions' },
    { name: 'Smooth', value: TRANSITIONS.duration.smooth, usage: 'Larger elements' },
    { name: 'Slow', value: TRANSITIONS.duration.slow, usage: 'Page transitions' },
  ].map((item) => (
    <div
      key={item.name}
      style={{
        background: PRIMITIVES.softLinen,
        borderRadius: RADIUS.lg,
        padding: '20px',
        border: `1px solid ${SLATE[200]}`,
      }}
    >
      <div style={{
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
        marginBottom: '8px',
      }}>
        <Clock size={14} color={DEEP_CURRENT[500]} />
        <span style={{
          fontSize: '13px',
          fontWeight: 600,
          fontFamily: '"Fixel", sans-serif',
          color: ABYSS[500],
        }}>
          {item.name}
        </span>
      </div>
      <div style={{
        fontSize: '20px',
        fontWeight: 700,
        fontFamily: '"JetBrains Mono", monospace',
        color: DEEP_CURRENT[500],
        marginBottom: '4px',
      }}>
        <span>{item.value}</span>
      </div>
      <div style={{
        fontSize: '11px',
        fontFamily: '"Fixel", sans-serif',
        color: DUSK_REEF[500],
      }}>
        <span>{item.usage}</span>
      </div>
    </div>
  ))}
</div>

### Easing Functions

<div
  id="easing-demo-container"
  style={{
    background: PRIMITIVES.softLinen,
    borderRadius: RADIUS.lg,
    padding: '24px',
    border: `1px solid ${SLATE[200]}`,
    marginBottom: '32px',
  }}
>
  <div style={{
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    marginBottom: '16px',
  }}>
    <div style={{
      fontSize: '14px',
      fontWeight: 600,
      fontFamily: '"Fixel", sans-serif',
      color: ABYSS[500],
    }}>
      <span>Compare easing functions</span>
    </div>
    <Button
      variant="accent"
      size="sm"
      onClick={() => {
        const bars = document.querySelectorAll('[data-easing-bar]');
        bars.forEach(bar => { bar.style.width = '0%'; });
        setTimeout(() => {
          bars.forEach(bar => { bar.style.width = '100%'; });
        }, 100);
      }}
    >
      <Play size={14} className="mr-1" />
      <span>Play</span>
    </Button>
  </div>

  {[
    { name: 'ease-out', timing: TRANSITIONS.timing.easeOut, desc: 'Recommended for UI', highlight: true },
    { name: 'ease', timing: TRANSITIONS.timing.ease, desc: 'General purpose' },
    { name: 'ease-in', timing: TRANSITIONS.timing.easeIn, desc: 'Elements exiting' },
    { name: 'ease-in-out', timing: TRANSITIONS.timing.easeInOut, desc: 'Looping animations' },
  ].map((item) => (
    <div key={item.name} style={{ marginBottom: '12px' }}>
      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '4px' }}>
        <code style={{
          width: '90px',
          fontSize: '12px',
          fontFamily: '"JetBrains Mono", ui-monospace, monospace',
          color: item.highlight ? DEEP_CURRENT[600] : DUSK_REEF[500],
          fontWeight: item.highlight ? 600 : 400,
        }}>{item.name}</code>
        <span style={{
          fontSize: '11px',
          color: item.highlight ? DEEP_CURRENT[600] : SLATE[500],
          fontFamily: '"Fixel", sans-serif',
          fontWeight: item.highlight ? 500 : 400,
        }}>{item.desc}</span>
      </div>
      <div style={{
        background: SLATE[100],
        borderRadius: RADIUS.xs,
        height: '24px',
        position: 'relative',
        overflow: 'hidden',
      }}>
        <div
          data-easing-bar
          style={{
            position: 'absolute',
            left: 0,
            top: 0,
            bottom: 0,
            width: '0%',
            background: item.highlight ? DEEP_CURRENT[500] : DUSK_REEF[400],
            borderRadius: RADIUS.xs,
            transition: `width 1000ms ${item.timing}`,
          }}
        />
      </div>
    </div>
  ))}
</div>

<h2 style={{ marginTop: SPACING.px.sectionHeadingTop, marginBottom: SPACING.px.sectionHeadingBottom }}>Usage Guidelines</h2>

<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(2, 1fr)',
  gap: '24px',
  marginBottom: '32px',
}}>
  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.lg,
    padding: '24px',
    border: `1px solid ${SLATE[200]}`,
  }}>
    <div style={{
      fontSize: '14px',
      fontWeight: 600,
      fontFamily: '"Fixel", sans-serif',
      color: ABYSS[500],
      marginBottom: '16px',
    }}>
      <span>When to use each loader</span>
    </div>
    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px', fontSize: '13px', fontFamily: '"Fixel", sans-serif', color: DUSK_REEF[500] }}>
      <div><strong style={{ color: ABYSS[500] }}>ExecutingAnimation:</strong> Form submissions, auth flows, page transitions, async operations</div>
      <div><strong style={{ color: ABYSS[500] }}>Skeleton:</strong> Content loading, data fetching, lazy-loaded components, list placeholders</div>
    </div>
  </div>

  <div style={{
    background: PRIMITIVES.white,
    borderRadius: RADIUS.lg,
    padding: '24px',
    border: `1px solid ${SLATE[200]}`,
  }}>
    <div style={{
      fontSize: '14px',
      fontWeight: 600,
      fontFamily: '"Fixel", sans-serif',
      color: ABYSS[500],
      marginBottom: '16px',
    }}>
      <span>Import from DDS</span>
    </div>
    <div style={{
      background: ABYSS[700],
      borderRadius: RADIUS.md,
      padding: '16px',
      fontFamily: '"JetBrains Mono", monospace',
      fontSize: '12px',
      color: SLATE[300],
      lineHeight: 1.6,
    }}>
      <div style={{ color: DUSK_REEF[300] }}>// Loading components</div>
      <div><span style={{ color: '#C586C0' }}>import</span> {'{'}</div>
      <div style={{ paddingLeft: '16px' }}>ExecutingAnimation,</div>
      <div style={{ paddingLeft: '16px' }}>Skeleton,</div>
      <div style={{ paddingLeft: '16px' }}>SkeletonImage,</div>
      <div style={{ paddingLeft: '16px' }}>SkeletonText,</div>
      <div>{'}'} <span style={{ color: '#C586C0' }}>from</span> <span style={{ color: '#CE9178' }}>'@adrozdenko/design-system'</span></div>
    </div>
  </div>
</div>

<InfoBox variant="warning">
  <strong>Don't create custom loaders.</strong> Always use the DDS animation components to maintain consistency.
  If you need a new animation pattern, propose it for the design system.
</InfoBox>
