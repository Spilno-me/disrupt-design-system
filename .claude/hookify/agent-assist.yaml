# AGENT-FIRST Hookify Rules
# Ultra-minimal, references JSON only

name: "agent-assist"
description: "Agent-first: 3-line prompts that reference structured data"
enabled: true
type: "prompt"

# =============================================================================
# EDIT COMPONENT
# =============================================================================

- trigger:
    tool: "Edit"
    filePattern: "src/components/.+\\.tsx$"
  check: |
    ‚ö†Ô∏è  EDIT COMPONENT ‚Üí Read: .claude/agent-context.json ‚Üí workflow.editComponent
    Breaking? (rename/remove props) ‚Üí STOP ‚Üí v3.0.0 only
    Safe? (optional prop/bugfix) ‚Üí MINOR/PATCH ‚Üí Proceed
    testId: Read .claude/testing-quick-ref.md ‚Üí ATOM | MOLECULE | PAGE strategy

# =============================================================================
# CREATE COMPONENT
# =============================================================================

- trigger:
    tool: "Write"
    filePattern: "src/components/.+\\.tsx$"
  check: |
    ‚ú® NEW COMPONENT ‚Üí Read: .claude/agent-context.json ‚Üí workflow.createComponent
    testId: ATOM (accept) | MOLECULE (auto-gen from props) | PAGE (hardcode)
    Must: Export from src/index.ts + types + Update CLAUDE.md
    This is MINOR bump

# =============================================================================
# EDIT EXPORTS
# =============================================================================

- trigger:
    tool: "Edit"
    filePattern: "src/index\\.ts$"
  check: |
    üì¶ EXPORTS ‚Üí Read: .claude/agent-context.json ‚Üí components.exports
    Missing HIGH: NotificationsPanel, QuickFilter, DropdownMenu, Tabs
    Export: Component + Types + Sub-components + Hooks

# =============================================================================
# BUMP VERSION
# =============================================================================

- trigger:
    tool: "Edit"
    filePattern: "package\\.json$"
  check: |
    üìå VERSION ‚Üí Read: .claude/agent-context.json ‚Üí versioning
    PATCH|MINOR|MAJOR ‚Üí Update CHANGELOG.md
    MAJOR = v3.0.0 only (not now!)

# =============================================================================
# USE RAW COLOR (BLOCK)
# =============================================================================

- trigger:
    tool: "Edit"
    filePattern: "\\.(tsx?|css)$"
  check: |
    üé® TOKENS ONLY ‚Üí Read: .claude/agent-context.json ‚Üí tokens
    ‚ùå NO: #hex, rgb(), bg-blue-500
    ‚úÖ YES: ALIAS.text.primary, bg-surface, text-primary
    Format: Use oklch() in tokens.css (not hex/rgb)

# =============================================================================
# RECORD FINDING (Minimal prompt)
# =============================================================================

- trigger:
    tool: "Edit"
    filePattern: "src/.+\\.(tsx?|css)$"
  check: |
    üí° New design pattern? ‚Üí Update .claude/DESIGN-SYSTEM.md
    üí° New rule discovered? ‚Üí Update .claude/agent-context.json
