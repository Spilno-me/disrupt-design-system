# CRITICAL: Session Context Loader
# Ensures agents read agent-context.json at session start

name: "session-context"
description: "Loads agent context at session start - REQUIRED READING"
enabled: true
type: "callback"

# =============================================================================
# SESSION START - Load Master Context
# =============================================================================

- trigger:
    event: "SessionStart"
  check: |
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸš€ DDS AGENT CONTEXT - READ THIS FIRST
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    You are working on the Disrupt Design System (DDS).

    ğŸ“– REQUIRED READING (read in this order):

    1. â­ .claude/agent-context.json
       â†’ Master file: rules, workflows, quick lookups

    2. ğŸ“¦ .claude/component-registry.json
       â†’ Component existence check

    3. ğŸ¨ .claude/DESIGN-SYSTEM.md
       â†’ Visual design decisions (shadows, colors, spacing)

    OPTIONAL (if building components):
    4. ğŸ§ª .claude/testing-quick-ref.md
       â†’ testId strategy
    5. ğŸ“– .claude/storybook-rules.md
       â†’ Story patterns

    âš¡ Core: ~400 lines = 5 seconds

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CRITICAL RULES:
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸš¨ VERSIONING: NO breaking changes until v3.0.0
    ğŸ¨ TOKENS: ZERO raw colors (#hex, rgb(), bg-blue-500)
    ğŸ“¦ EXPORTS: Two-level (component + src/index.ts)
    ğŸ§ª TESTING: ATOM (accept) | MOLECULE (auto-gen) | PAGE (hardcode)
    ğŸ¯ VARIANTS: Minimal (â‰¤5), functional only, no aesthetic

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    Ready. Use JSON for all lookups! âš¡

# =============================================================================
# FIRST MAJOR OPERATION - Remind if context not loaded
# =============================================================================

- trigger:
    tool: "Edit"
    filePattern: "src/.+\\.(tsx?|css)$"
  check: |
    ğŸ’¡ TIP: If you haven't yet, read .claude/agent-context.json first

    Quick check before editing:
    â€¢ Is this backwards compatible? (workflow.editComponent)
    â€¢ Using design tokens only? (criticalRules.tokens)
    â€¢ Need to update CHANGELOG? (Yes if API change)

    Read: .claude/agent-context.json â†’ workflow.editComponent

- trigger:
    tool: "Write"
    filePattern: "src/components/.+\\.tsx$"
  check: |
    ğŸ’¡ TIP: If you haven't yet, read .claude/agent-context.json first

    Creating new component checklist:
    â€¢ Check: .claude/component-registry.json (does it exist?)
    â€¢ Export from src/index.ts + types
    â€¢ Update CLAUDE.md
    â€¢ This is MINOR bump

    Read: .claude/agent-context.json â†’ workflow.createComponent
