{
  "$schema": "Contrast Matrix - WCAG Validation for Agent Color Decisions",
  "_description": "Pre-calculated contrast ratios for all common background/foreground pairs",
  "_usage": "Look up your bg/fg pair → check ratio against WCAG thresholds",

  "wcag": {
    "_note": "Web Content Accessibility Guidelines 2.1 contrast requirements",
    "AA": {
      "normalText": { "ratio": 4.5, "description": "Body text, labels, form inputs" },
      "largeText": { "ratio": 3.0, "description": "18pt+ regular or 14pt+ bold" },
      "graphics": { "ratio": 3.0, "description": "Icons, UI components, borders" }
    },
    "AAA": {
      "normalText": { "ratio": 7.0, "description": "Enhanced readability" },
      "largeText": { "ratio": 4.5, "description": "Enhanced for large text" }
    }
  },

  "thresholds": {
    "FAIL": { "max": 2.99, "symbol": "FAIL", "color": "red" },
    "AA_GRAPHICS": { "min": 3.0, "max": 4.49, "symbol": "AA-G", "color": "yellow", "use": "icons, borders, large text only" },
    "AA_TEXT": { "min": 4.5, "max": 6.99, "symbol": "AA", "color": "green", "use": "all text and graphics" },
    "AAA_TEXT": { "min": 7.0, "symbol": "AAA", "color": "blue", "use": "enhanced accessibility" }
  },

  "matrix": {
    "_note": "Background → Foreground → Contrast Ratio and Pass/Fail status",

    "ABYSS[500]_#2D3142": {
      "_luminance": 0.031,
      "_category": "dark",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 12.23, "passes": "AAA", "use": "primary text, icons" },
      "SLATE[300]_#CBD5E1": { "ratio": 8.54, "passes": "AAA", "use": "secondary text" },
      "SLATE[400]_#94A3B8": { "ratio": 5.67, "passes": "AA", "use": "muted text, placeholders" },
      "DEEP_CURRENT[300]_#66CFE1": { "ratio": 7.89, "passes": "AAA", "use": "links, accents" },
      "DEEP_CURRENT[500]_#08A4BD": { "ratio": 5.21, "passes": "AA", "use": "accent elements" },
      "ABYSS[200]_#A3A7AF": { "ratio": 3.98, "passes": "AA-G", "use": "FORBIDDEN for text - icons only!" },
      "ABYSS[300]_#757B87": { "ratio": 2.52, "passes": "FAIL", "use": "NEVER USE" },
      "DUSK_REEF[300]_#9F93B7": { "ratio": 4.31, "passes": "AA-G", "use": "FORBIDDEN for normal text" }
    },

    "ABYSS[700]_#1D1F2A": {
      "_luminance": 0.014,
      "_category": "dark",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 16.12, "passes": "AAA", "use": "primary text, icons" },
      "SLATE[300]_#CBD5E1": { "ratio": 11.28, "passes": "AAA", "use": "secondary text" },
      "SLATE[400]_#94A3B8": { "ratio": 7.49, "passes": "AAA", "use": "muted text" },
      "DEEP_CURRENT[300]_#66CFE1": { "ratio": 10.42, "passes": "AAA", "use": "links, accents" }
    },

    "DEEP_CURRENT[500]_#08A4BD": {
      "_luminance": 0.243,
      "_category": "accent-teal",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 3.57, "passes": "AA-G", "use": "large text, icons, graphics" },
      "PRIMITIVES.black_#000000": { "ratio": 5.86, "passes": "AA", "use": "text (if needed)" },
      "ABYSS[900]_#0C0D12": { "ratio": 5.41, "passes": "AA", "use": "alternative dark text" },
      "DEEP_CURRENT[50]_#E6F7FA": { "ratio": 3.12, "passes": "AA-G", "use": "large text only" },
      "_WARNING": "White on teal only passes AA for large text/graphics, NOT normal text!"
    },

    "DEEP_CURRENT[600]_#068397": {
      "_luminance": 0.156,
      "_category": "accent-teal",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 4.89, "passes": "AA", "use": "text, icons" },
      "DEEP_CURRENT[50]_#E6F7FA": { "ratio": 4.28, "passes": "AA-G", "use": "large text, icons" }
    },

    "DUSK_REEF[500]_#5E4F7E": {
      "_luminance": 0.078,
      "_category": "accent-purple",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 7.12, "passes": "AAA", "use": "primary text, icons" },
      "DUSK_REEF[50]_#EFEDF3": { "ratio": 5.89, "passes": "AA", "use": "secondary text" },
      "DUSK_REEF[100]_#DFDBE7": { "ratio": 4.92, "passes": "AA", "use": "muted text" }
    },

    "PRIMITIVES.white_#FFFFFF": {
      "_luminance": 1.0,
      "_category": "light",
      "ABYSS[500]_#2D3142": { "ratio": 12.23, "passes": "AAA", "use": "primary text" },
      "ABYSS[400]_#474F5F": { "ratio": 8.73, "passes": "AAA", "use": "emphasis text" },
      "DUSK_REEF[500]_#5E4F7E": { "ratio": 7.12, "passes": "AAA", "use": "secondary text" },
      "DUSK_REEF[600]_#4B3F65": { "ratio": 8.94, "passes": "AAA", "use": "secondary text (darker)" },
      "DEEP_CURRENT[500]_#08A4BD": { "ratio": 3.57, "passes": "AA-G", "use": "links, accents - large text only!" },
      "DEEP_CURRENT[600]_#068397": { "ratio": 4.89, "passes": "AA", "use": "links, accents" },
      "DEEP_CURRENT[700]_#056271": { "ratio": 6.42, "passes": "AA", "use": "links (darker)" },
      "SLATE[500]_#64748B": { "ratio": 4.62, "passes": "AA", "use": "muted text" },
      "PRIMITIVES.white_#FFFFFF": { "ratio": 1.0, "passes": "FAIL", "use": "NEVER - invisible!" }
    },

    "PRIMITIVES.cream_#FBFBF3": {
      "_luminance": 0.956,
      "_category": "light",
      "ABYSS[500]_#2D3142": { "ratio": 11.69, "passes": "AAA", "use": "primary text" },
      "DUSK_REEF[500]_#5E4F7E": { "ratio": 6.81, "passes": "AA", "use": "secondary text" },
      "DEEP_CURRENT[600]_#068397": { "ratio": 4.68, "passes": "AA", "use": "links" }
    },

    "SLATE[50]_#F8FAFC": {
      "_luminance": 0.953,
      "_category": "subtle",
      "ABYSS[500]_#2D3142": { "ratio": 11.63, "passes": "AAA", "use": "primary text" },
      "DUSK_REEF[500]_#5E4F7E": { "ratio": 6.78, "passes": "AA", "use": "secondary text" },
      "DUSK_REEF[600]_#4B3F65": { "ratio": 8.51, "passes": "AAA", "use": "emphasis text" },
      "SLATE[600]_#475569": { "ratio": 6.14, "passes": "AA", "use": "muted text" }
    },

    "CORAL[500]_#F70D1A": {
      "_luminance": 0.159,
      "_category": "error",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 4.79, "passes": "AA", "use": "text, icons" },
      "CORAL[50]_#FEF2F2": { "ratio": 4.21, "passes": "AA-G", "use": "large text only" },
      "_WARNING": "Red backgrounds have borderline contrast - use sparingly"
    },

    "CORAL[50]_#FEF2F2": {
      "_luminance": 0.917,
      "_category": "error-subtle",
      "CORAL[700]_#B91C1C": { "ratio": 5.12, "passes": "AA", "use": "error text" },
      "CORAL[600]_#DC2626": { "ratio": 4.28, "passes": "AA-G", "use": "error text (lighter)" },
      "ABYSS[500]_#2D3142": { "ratio": 11.19, "passes": "AAA", "use": "primary text" }
    },

    "gradients_dark": {
      "_note": "For ABYSS gradients, use darkest point for calculations",
      "_reference": "ABYSS[700] or darker",
      "PRIMITIVES.white_#FFFFFF": { "ratio": "12-16+", "passes": "AAA", "use": "primary text" },
      "SLATE[300]_#CBD5E1": { "ratio": "8-11+", "passes": "AAA", "use": "secondary text" }
    }
  },

  "quickDecisions": {
    "_note": "Fast lookup for common scenarios",

    "darkBackground": {
      "primaryText": "PRIMITIVES.white (12:1+)",
      "secondaryText": "SLATE[300] (8:1+)",
      "mutedText": "SLATE[400] (5:1+)",
      "links": "DEEP_CURRENT[300] (7:1+)",
      "icons": "PRIMITIVES.white",
      "NEVER": ["ABYSS[200-400]", "DUSK_REEF[300-500]", "DEEP_CURRENT[500-700]"]
    },

    "lightBackground": {
      "primaryText": "ABYSS[500] (12:1+)",
      "secondaryText": "DUSK_REEF[500-600] (6-8:1)",
      "mutedText": "SLATE[500-600] (4-6:1)",
      "links": "DEEP_CURRENT[600-700] (4-6:1)",
      "icons": "ABYSS[500]",
      "NEVER": ["PRIMITIVES.white", "SLATE[100-300]", "light tints"]
    },

    "tealAccent": {
      "DEEP_CURRENT[500]": {
        "whiteText": "3.57:1 - AA for graphics/large text ONLY",
        "recommendation": "Use DEEP_CURRENT[600]+ for normal text on white"
      },
      "DEEP_CURRENT[600]": {
        "whiteText": "4.89:1 - AA for all text",
        "recommendation": "Preferred for buttons with white text"
      }
    }
  },

  "validationWorkflow": {
    "step1": "Identify background color and find its entry in matrix",
    "step2": "Find your desired foreground color",
    "step3": "Check the ratio and 'passes' field",
    "step4": "If 'AA-G' - only use for icons, borders, or 18pt+ text",
    "step5": "If 'FAIL' - choose different color from same background entry",
    "step6": "Report to user if their specified color fails validation"
  },

  "agentBehavior": {
    "whenGeneratingColors": [
      "1. Always pick from 'passes: AAA' or 'passes: AA' entries",
      "2. Avoid 'AA-G' unless specifically for icons/large text",
      "3. Never use colors marked 'FAIL' or in NEVER lists"
    ],
    "whenUserSpecifiesColor": [
      "1. Look up the combination in matrix",
      "2. If ratio < 4.5 for text, WARN the user",
      "3. Suggest alternative from same background category",
      "4. Format: 'Contrast ratio {X}:1 {PASS|FAIL} WCAG AA for {text|graphics}'"
    ]
  },

  "formulaReference": {
    "_note": "For calculating unlisted combinations",
    "relativeLuminance": "L = 0.2126*R + 0.7152*G + 0.0722*B (where RGB are linearized)",
    "linearize": "if (sRGB <= 0.03928) L = sRGB/12.92 else L = ((sRGB+0.055)/1.055)^2.4",
    "contrastRatio": "(L1 + 0.05) / (L2 + 0.05) where L1 > L2"
  }
}
