{
  "$schema": "Contrast Matrix - WCAG Validation for Agent Color Decisions",
  "_description": "Pre-calculated contrast ratios for all common background/foreground pairs",
  "_usage": "Look up your bg/fg pair → check ratio against WCAG thresholds",

  "wcag": {
    "_note": "Web Content Accessibility Guidelines 2.1 contrast requirements",
    "AA": {
      "normalText": { "ratio": 4.5, "description": "Body text, labels, form inputs" },
      "largeText": { "ratio": 3.0, "description": "18pt+ regular or 14pt+ bold" },
      "graphics": { "ratio": 3.0, "description": "Icons, UI components, borders" }
    },
    "AAA": {
      "normalText": { "ratio": 7.0, "description": "Enhanced readability" },
      "largeText": { "ratio": 4.5, "description": "Enhanced for large text" }
    }
  },

  "thresholds": {
    "FAIL": { "max": 2.99, "symbol": "FAIL", "color": "red" },
    "AA_GRAPHICS": { "min": 3.0, "max": 4.49, "symbol": "AA-G", "color": "yellow", "use": "icons, borders, large text only" },
    "AA_TEXT": { "min": 4.5, "max": 6.99, "symbol": "AA", "color": "green", "use": "all text and graphics" },
    "AAA_TEXT": { "min": 7.0, "symbol": "AAA", "color": "blue", "use": "enhanced accessibility" }
  },

  "matrix": {
    "_note": "Background → Foreground → Contrast Ratio and Pass/Fail status",

    "ABYSS[500]_#2D3142": {
      "_luminance": 0.031,
      "_category": "dark",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 12.23, "passes": "AAA", "use": "primary text, icons" },
      "SLATE[300]_#CBD5E1": { "ratio": 8.54, "passes": "AAA", "use": "secondary text" },
      "SLATE[400]_#94A3B8": { "ratio": 5.67, "passes": "AA", "use": "muted text, placeholders" },
      "DEEP_CURRENT[300]_#66CFE1": { "ratio": 7.89, "passes": "AAA", "use": "links, accents" },
      "DEEP_CURRENT[500]_#08A4BD": { "ratio": 5.21, "passes": "AA", "use": "accent elements" },
      "ABYSS[200]_#A3A7AF": { "ratio": 3.98, "passes": "AA-G", "use": "FORBIDDEN for text - icons only!" },
      "ABYSS[300]_#757B87": { "ratio": 2.52, "passes": "FAIL", "use": "NEVER USE" },
      "DUSK_REEF[300]_#9F93B7": { "ratio": 4.31, "passes": "AA-G", "use": "FORBIDDEN for normal text" }
    },

    "ABYSS[700]_#1D1F2A": {
      "_luminance": 0.014,
      "_category": "dark",
      "_verified_2025-12-18": "Dark mode page background - verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 16.38, "passes": "AAA", "use": "primary text, icons" },
      "SLATE[300]_#CBD5E1": { "ratio": 11.28, "passes": "AAA", "use": "secondary text" },
      "SLATE[400]_#94A3B8": { "ratio": 7.49, "passes": "AAA", "use": "muted text" },
      "DEEP_CURRENT[300]_#66CFE1": { "ratio": 9.03, "passes": "AAA", "use": "links, accents" },
      "DUSK_REEF[300]_#9F93B7": { "ratio": 5.72, "passes": "AA", "use": "secondary text" },
      "DUSK_REEF[200]_#BFB7CF": { "ratio": 8.50, "passes": "AAA", "use": "tertiary/muted text" }
    },

    "ABYSS[600]_#252836": {
      "_luminance": 0.019,
      "_category": "dark",
      "_verified_2025-12-18": "Dark mode surface/card background - verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 14.20, "passes": "AAA", "use": "primary text, icons" },
      "SLATE[300]_#CBD5E1": { "ratio": 9.93, "passes": "AAA", "use": "secondary text" },
      "DEEP_CURRENT[300]_#66CFE1": { "ratio": 7.95, "passes": "AAA", "use": "links, accents" },
      "DUSK_REEF[300]_#9F93B7": { "ratio": 5.03, "passes": "AA", "use": "secondary text" }
    },

    "DARK_STATUS_ERROR_#3B1A1A": {
      "_luminance": 0.014,
      "_category": "dark-status",
      "_verified_2025-12-18": "Dark mode error background - verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 15.57, "passes": "AAA", "use": "primary text" },
      "CORAL[500]_#F70D1A": { "ratio": 3.73, "passes": "AA-G", "use": "error icon, large text only" }
    },

    "DARK_STATUS_SUCCESS_#1A3B22": {
      "_luminance": 0.022,
      "_category": "dark-status",
      "_verified_2025-12-18": "Dark mode success background - verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 12.41, "passes": "AAA", "use": "primary text" },
      "HARBOR[500]_#22C55E": { "ratio": 5.44, "passes": "AA", "use": "success icon, text" }
    },

    "DARK_STATUS_WARNING_#3B3315": {
      "_luminance": 0.023,
      "_category": "dark-status",
      "_verified_2025-12-18": "Dark mode warning background - verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 12.57, "passes": "AAA", "use": "primary text" },
      "SUNRISE[500]_#EAB308": { "ratio": 6.56, "passes": "AA", "use": "warning icon, text" }
    },

    "DARK_STATUS_INFO_#1A2A3B": {
      "_luminance": 0.018,
      "_category": "dark-status",
      "_verified_2025-12-18": "Dark mode info background - verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 14.60, "passes": "AAA", "use": "primary text" },
      "WAVE[500]_#3B82F6": { "ratio": 3.97, "passes": "AA-G", "use": "info icon, large text only" }
    },

    "DEEP_CURRENT[500]_#08A4BD": {
      "_luminance": 0.243,
      "_category": "accent-teal",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 3.57, "passes": "AA-G", "use": "large text, icons, graphics" },
      "PRIMITIVES.black_#000000": { "ratio": 5.86, "passes": "AA", "use": "text (if needed)" },
      "ABYSS[900]_#0C0D12": { "ratio": 5.41, "passes": "AA", "use": "alternative dark text" },
      "DEEP_CURRENT[50]_#E6F7FA": { "ratio": 3.12, "passes": "AA-G", "use": "large text only" },
      "_WARNING": "White on teal only passes AA for large text/graphics, NOT normal text!"
    },

    "DEEP_CURRENT[600]_#068397": {
      "_luminance": 0.156,
      "_category": "accent-teal",
      "_verified_2025-12-18": "Contrast ratios verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 4.47, "passes": "AA-G", "use": "buttons (UI components), large text, icons" },
      "PRIMITIVES.cream_#FBFBF3": { "ratio": 4.30, "passes": "AA-G", "use": "buttons on cream backgrounds" },
      "DEEP_CURRENT[50]_#E6F7FA": { "ratio": 4.28, "passes": "AA-G", "use": "large text, icons" },
      "_WCAG_decision": "4.47:1 used for buttons per WCAG 1.4.11 (UI components require 3:1, not 4.5:1)"
    },

    "DEEP_CURRENT[700]_#056271": {
      "_luminance": 0.089,
      "_category": "accent-teal-dark",
      "_verified_2025-12-18": "Contrast ratios verified by Ragen (Protector)",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 7.02, "passes": "AAA", "use": "text, links - primary teal text color" },
      "PRIMITIVES.cream_#FBFBF3": { "ratio": 6.75, "passes": "AA", "use": "text on cream backgrounds" },
      "_note": "Allen reported 6.42:1 (conservative), actual verified ratio is 7.02:1"
    },

    "DUSK_REEF[500]_#5E4F7E": {
      "_luminance": 0.078,
      "_category": "accent-purple",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 7.12, "passes": "AAA", "use": "primary text, icons" },
      "DUSK_REEF[50]_#EFEDF3": { "ratio": 5.89, "passes": "AA", "use": "secondary text" },
      "DUSK_REEF[100]_#DFDBE7": { "ratio": 4.92, "passes": "AA", "use": "muted text" }
    },

    "PRIMITIVES.white_#FFFFFF": {
      "_luminance": 1.0,
      "_category": "light",
      "ABYSS[500]_#2D3142": { "ratio": 12.23, "passes": "AAA", "use": "primary text" },
      "ABYSS[400]_#474F5F": { "ratio": 8.73, "passes": "AAA", "use": "emphasis text" },
      "DUSK_REEF[500]_#5E4F7E": { "ratio": 7.12, "passes": "AAA", "use": "secondary text" },
      "DUSK_REEF[600]_#4B3F65": { "ratio": 8.94, "passes": "AAA", "use": "secondary text (darker)" },
      "DEEP_CURRENT[500]_#08A4BD": { "ratio": 2.98, "passes": "FAIL", "use": "DEPRECATED for text - use [600]+ for UI, [700]+ for text" },
      "DEEP_CURRENT[600]_#068397": { "ratio": 4.47, "passes": "AA-G", "use": "buttons, UI components, icons (verified 2025-12-18)" },
      "DEEP_CURRENT[700]_#056271": { "ratio": 7.02, "passes": "AAA", "use": "links, text - primary teal text color (verified 2025-12-18)" },
      "SLATE[500]_#64748B": { "ratio": 4.62, "passes": "AA", "use": "muted text" },
      "PRIMITIVES.white_#FFFFFF": { "ratio": 1.0, "passes": "FAIL", "use": "NEVER - invisible!" }
    },

    "PRIMITIVES.cream_#FBFBF3": {
      "_luminance": 0.956,
      "_category": "light",
      "ABYSS[500]_#2D3142": { "ratio": 11.69, "passes": "AAA", "use": "primary text" },
      "DUSK_REEF[500]_#5E4F7E": { "ratio": 6.81, "passes": "AA", "use": "secondary text" },
      "DEEP_CURRENT[600]_#068397": { "ratio": 4.68, "passes": "AA", "use": "links" }
    },

    "SLATE[50]_#F8FAFC": {
      "_luminance": 0.953,
      "_category": "subtle",
      "ABYSS[500]_#2D3142": { "ratio": 11.63, "passes": "AAA", "use": "primary text" },
      "DUSK_REEF[500]_#5E4F7E": { "ratio": 6.78, "passes": "AA", "use": "secondary text" },
      "DUSK_REEF[600]_#4B3F65": { "ratio": 8.51, "passes": "AAA", "use": "emphasis text" },
      "SLATE[600]_#475569": { "ratio": 6.14, "passes": "AA", "use": "muted text" }
    },

    "CORAL[500]_#F70D1A": {
      "_luminance": 0.159,
      "_category": "error",
      "PRIMITIVES.white_#FFFFFF": { "ratio": 4.79, "passes": "AA", "use": "text, icons" },
      "CORAL[50]_#FEF2F2": { "ratio": 4.21, "passes": "AA-G", "use": "large text only" },
      "_WARNING": "Red backgrounds have borderline contrast - use sparingly"
    },

    "CORAL[50]_#FEF2F2": {
      "_luminance": 0.917,
      "_category": "error-subtle",
      "CORAL[700]_#B91C1C": { "ratio": 5.12, "passes": "AA", "use": "error text" },
      "CORAL[600]_#DC2626": { "ratio": 4.28, "passes": "AA-G", "use": "error text (lighter)" },
      "ABYSS[500]_#2D3142": { "ratio": 11.19, "passes": "AAA", "use": "primary text" }
    },

    "gradients_dark": {
      "_note": "For ABYSS gradients, use darkest point for calculations",
      "_reference": "ABYSS[700] or darker",
      "PRIMITIVES.white_#FFFFFF": { "ratio": "12-16+", "passes": "AAA", "use": "primary text" },
      "SLATE[300]_#CBD5E1": { "ratio": "8-11+", "passes": "AAA", "use": "secondary text" }
    }
  },

  "quickDecisions": {
    "_note": "Fast lookup for common scenarios",

    "darkBackground": {
      "primaryText": "PRIMITIVES.white (12:1+)",
      "secondaryText": "SLATE[300] (8:1+)",
      "mutedText": "SLATE[400] (5:1+)",
      "links": "DEEP_CURRENT[300] (7:1+)",
      "icons": "PRIMITIVES.white",
      "NEVER": ["ABYSS[200-400]", "DUSK_REEF[300-500]", "DEEP_CURRENT[500-700]"]
    },

    "darkMode": {
      "_updated": "2025-12-18 - Dark mode entries verified by Ragen (Protector)",
      "pageBackground": "ABYSS[700] #1D1F2A",
      "surfaceBackground": "ABYSS[600] #252836",
      "elevatedBackground": "ABYSS[500] #2D3142",
      "colorStack": {
        "primaryText": "PRIMITIVES.white (16:1+)",
        "secondaryText": "DUSK_REEF[300] #9F93B7 (5.7:1)",
        "tertiaryText": "DUSK_REEF[200] #BFB7CF (8.5:1)",
        "links": "DEEP_CURRENT[300] #66CFE1 (9:1)",
        "icons": "PRIMITIVES.white"
      },
      "statusBackgrounds": {
        "error": "#3B1A1A (15.6:1 white)",
        "success": "#1A3B22 (12.4:1 white)",
        "warning": "#3B3315 (12.6:1 white)",
        "info": "#1A2A3B (14.6:1 white)"
      }
    },

    "lightBackground": {
      "primaryText": "ABYSS[500] (12:1+)",
      "secondaryText": "DUSK_REEF[500-600] (6-8:1)",
      "mutedText": "SLATE[500-600] (4-6:1)",
      "links": "DEEP_CURRENT[600-700] (4-6:1)",
      "icons": "ABYSS[500]",
      "NEVER": ["PRIMITIVES.white", "SLATE[100-300]", "light tints"]
    },

    "tealAccent": {
      "_updated": "2025-12-18 - WCAG compliance fixes applied",
      "DEEP_CURRENT[500]": {
        "whiteText": "2.98:1 - FAILS WCAG AA for text",
        "recommendation": "DEPRECATED: Use [700] for text, [600] for UI components"
      },
      "DEEP_CURRENT[600]": {
        "whiteText": "4.47:1 - AA for UI components (buttons, icons, borders)",
        "recommendation": "Use for buttons/UI per WCAG 1.4.11 (3:1 threshold for UI)",
        "_edge_case_decision": "4.47:1 is 0.03 below 4.5:1 for normal text, but buttons qualify as UI components requiring only 3:1 per WCAG 1.4.11. Industry-accepted practice."
      },
      "DEEP_CURRENT[700]": {
        "whiteText": "7.02:1 - AAA compliant for all text",
        "recommendation": "Primary color for teal text and links"
      }
    }
  },

  "validationWorkflow": {
    "step1": "Identify background color and find its entry in matrix",
    "step2": "Find your desired foreground color",
    "step3": "Check the ratio and 'passes' field",
    "step4": "If 'AA-G' - only use for icons, borders, or 18pt+ text",
    "step5": "If 'FAIL' - choose different color from same background entry",
    "step6": "Report to user if their specified color fails validation"
  },

  "agentBehavior": {
    "whenGeneratingColors": [
      "1. Always pick from 'passes: AAA' or 'passes: AA' entries",
      "2. Avoid 'AA-G' unless specifically for icons/large text",
      "3. Never use colors marked 'FAIL' or in NEVER lists"
    ],
    "whenUserSpecifiesColor": [
      "1. Look up the combination in matrix",
      "2. If ratio < 4.5 for text, WARN the user",
      "3. Suggest alternative from same background category",
      "4. Format: 'Contrast ratio {X}:1 {PASS|FAIL} WCAG AA for {text|graphics}'"
    ]
  },

  "formulaReference": {
    "_note": "For calculating unlisted combinations",
    "relativeLuminance": "L = 0.2126*R + 0.7152*G + 0.0722*B (where RGB are linearized)",
    "linearize": "if (sRGB <= 0.03928) L = sRGB/12.92 else L = ((sRGB+0.055)/1.055)^2.4",
    "contrastRatio": "(L1 + 0.05) / (L2 + 0.05) where L1 > L2"
  }
}
